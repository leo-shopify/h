<!doctype html>
<title>h</title>
<body>
  <script>
    /** @jsx h */
    
    function h(node, attributes, ...children) {
      if (typeof node === 'function') {
        return node(attributes, ...children);
      }
    
      let elm;
      if (typeof node === 'string') {
        elm = document.createElement(node);
      } else if (node.nodeType) {
        elm = node;
      } else {
        throw new TypeError('Unknown node type');
      }
    
      if (Boolean(attributes)) {
        Object.keys(attributes).forEach(k => elm.setAttribute(k, attributes[k]));
      }
    
      return children.reduce(rec, elm);
    }
    
    function rec(acc, c) {
      let ch;
      if (Array.isArray(c)) {
        ch = c.reduce(rec, document.createDocumentFragment());
      } else if (c.nodeType) {
        ch = c;
      } else {
        ch = document.createTextNode(c);
      }
      acc.appendChild(ch);
      return acc;
    }
    
    function Title(attr, str) {
      return h(
        'h1',
        null,
        str.toUpperCase()
      );
    }
    
    function Author(attr, ...name) {
      return h(
        'a',
        { href: `mailto:${attr.email}` },
        name
      );
    }
    
    const body = h(
      'header',
      null,
      h(
        Title,
        null,
        'Santa Maradona'
      ),
      h(
        Author,
        { email: 'mano.negra@example.com' },
        'Mano ',
        h(
          'strong',
          null,
          'Negra'
        )
      )
    );
    
    document.body.appendChild(body);
  </script>
</body>
